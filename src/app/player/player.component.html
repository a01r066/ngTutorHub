<div class="container">
  <mat-toolbar style="background-color: #29303B; color: white">
    <div fxFill fxLayout="row" fxLayoutAlign="left center">
      <span><button mat-icon-button (click)="home()" style="transform: scale(1.5)"><mat-icon>home</mat-icon></button></span>

      <span fxFlex="80" style="font-weight: 400; text-align: center">{{ course?.title }}</span>

      <span fxFlex="20" style="display: flex; justify-content: flex-end">
    <button mat-icon-button style="transform: scale(1.2)" color="accent" (click)="share()"><mat-icon>share</mat-icon></button>
    </span>
    </div>
  </mat-toolbar>
  <ng-container *ngIf="isHidden">
    <div class="show-button"><button mat-icon-button (click)="toggle()" color="accent" style="transform: scale(1.2); background-color: #888888" matTooltip="Course content"><mat-icon>arrow_back</mat-icon></button></div>
  </ng-container>
  <div fxFlext fxLayout="row">
    <div fxFlex="{{ isHidden ? 100: 75 }}">
      <div fxLayout="column">
        <ng-container *ngIf="chapter">
          <iframe *ngIf="getFileExt(chapter) !== 'mp4'" [src]="videoUrl" width="100%" height="640px" frameborder="0" allowfullscreen style="padding: 16px"></iframe>
          <video *ngIf="getFileExt(chapter) === 'mp4'" [src]="videoUrl" width="100%" height="640px" style=" background-color: #1E1E1C" controls></video>
        </ng-container>
        <div>
          <mat-tab-group>
<!--            <mat-tab label="Search">Search</mat-tab>-->
            <mat-tab label="Overview">
              <app-course-overview [course]="course"></app-course-overview>
            </mat-tab>
          </mat-tab-group>
        </div>
      </div>
    </div>
    <div fxFlex="{{ isHidden ? 0 : 25 }}">
      <ng-container *ngIf="!isHidden">
        <div fxLayout="row" fxLayoutAlign="left center" style="height: 56px">
          <div fxFlex="85" style="color: black; font-weight: 500; font-size: 1.1rem; margin: 0 0 0 16px">Course content</div>
          <div><button mat-icon-button (click)="toggle()"><mat-icon>close</mat-icon></button></div>
        </div>
        <div>
          <mat-accordion>
            <mat-expansion-panel *ngFor="let lecture of chaptersArray; let i = index">
              <mat-expansion-panel-header>
                <mat-panel-title style="font-weight: 500">
                  {{ lecture.title }}
                </mat-panel-title>
              </mat-expansion-panel-header>
              <ng-template matExpansionPanelContent *ngIf="lecture.chapters">
                <mat-nav-list>
                  <mat-list-item [routerLinkActive]="['active']" *ngFor="let chapter of lecture.chapters; let idx = index" (click)="onClickChapter(chapter, i, idx)" [class.active]="selected == idx">{{ chapter.title }}
                    <span style="float: right" *ngIf="chapter">
                  <ng-container *ngIf="getFileExt(chapter) === 'mp4' && chapter.duration > 0" >{{ chapter.duration | number }} min</ng-container>
                  <ng-container *ngIf="getFileExt(chapter) === 'zip'"><button mat-icon-button style="color: gray"><mat-icon>attach_file</mat-icon></button></ng-container>
                  <ng-container *ngIf="getFileExt(chapter) === 'tml' || getFileExt(chapter) === 'pdf'"><button mat-icon-button style="color:gray"><mat-icon>description</mat-icon></button></ng-container>
                </span>
                  </mat-list-item>
                </mat-nav-list>
              </ng-template>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </ng-container>
    </div>
  </div>
</div>
